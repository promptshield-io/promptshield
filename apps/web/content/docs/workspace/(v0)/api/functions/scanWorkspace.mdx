[**@promptshield/workspace**](../index.md)

***

[@promptshield/workspace](../index.md) / scanWorkspace

# Function: scanWorkspace()

> **scanWorkspace**(`patterns`, `root`, `config?`): `AsyncGenerator`\<[`ScanEvent`](../interfaces/ScanEvent.md)\>

Defined in: [workspace.ts:410](https://github.com/promptshield-io/promptshield/blob/main/packages/workspace/src/workspace.ts#L410)

Scans a workspace using a high-concurrency Async Generator.

This orchestrator bridges `@promptshield/core` and the filesystem,
providing real-time feedback suitable for CLI progress bars
and LSP diagnostics.

Execution Model:
- Files are processed concurrently (bounded by `concurrency`).
- Results are yielded in task-creation order (not completion order).

Cache Semantics:
- When caching is enabled, baseline results are computed using
  `minSeverity: "LOW"` with inline ignores enabled.
- Presentation-level filtering (`minSeverity`, `noInlineIgnore`)
  is applied after cache retrieval.
- Cache writes are intentionally NOT awaited. This is a deliberate
  performance trade-off to avoid blocking scan throughput.
  Cache persistence is best-effort and not part of scan correctness.

## Parameters

### patterns

`string`[]

### root

`string`

### config?

`Omit`\<[`WorkspaceScanConfig`](../interfaces/WorkspaceScanConfig.md), `"shouldApplyFixes"` \| `"write"`\> = `{}`

## Returns

`AsyncGenerator`\<[`ScanEvent`](../interfaces/ScanEvent.md)\>

## Example

```ts
for await (const { path, result, progress } of scanWorkspace(['**/*.js'], root)) {
  console.log(`[${progress}%] Scanned ${path}: ${result.threats.length} threats`);
}
```
